From c33e662ea5fd2f2ca162c3b3e24b842e1edbfd8e Mon Sep 17 00:00:00 2001
From: Dimitar Dimitrov <dimitar@dinux.eu>
Date: Thu, 22 Jul 2021 21:52:26 +0300
Subject: [PATCH 05/10] Dont link to libfl as its unnecessary

Signed-off-by: Dimitar Dimitrov <dimitar@dinux.eu>
---
 binutils/configure    | 3 +++
 binutils/configure.ac | 3 +++
 gas/configure         | 3 +++
 gas/configure.ac      | 3 +++
 ld/configure          | 3 +++
 ld/configure.ac       | 3 +++
 6 files changed, 18 insertions(+)

diff --git a/binutils/configure b/binutils/configure
index 05409f4eda6..154b5e60c9d 100755
--- a/binutils/configure
+++ b/binutils/configure
@@ -12233,6 +12233,7 @@ fi
 done
 test -n "$YACC" || YACC="yacc"
 
+save_LIBS=$LIBS
 for ac_prog in flex lex
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
@@ -12396,6 +12397,8 @@ esac
 if test "$LEX" = :; then
   LEX=${am_missing_run}flex
 fi
+LIBS=$save_LIBS
+LEXLIB=
 
 ALL_LINGUAS="bg ca da es fi fr hr id it ja pt ro ru rw sk sr sv tr uk vi zh_CN zh_TW"
 # If we haven't got the data from the intl directory,
diff --git a/binutils/configure.ac b/binutils/configure.ac
index b2d0be00b60..71350a01bb6 100644
--- a/binutils/configure.ac
+++ b/binutils/configure.ac
@@ -136,7 +136,10 @@ if test -z "$host" ; then
 fi
 
 AC_PROG_YACC
+save_LIBS=$LIBS
 AM_PROG_LEX
+LIBS=$save_LIBS
+LEXLIB=
 
 ALL_LINGUAS="bg ca da es fi fr hr id it ja pt ro ru rw sk sr sv tr uk vi zh_CN zh_TW"
 ZW_GNU_GETTEXT_SISTER_DIR
diff --git a/gas/configure b/gas/configure
index b1bf9a61f35..07f6d3e5207 100755
--- a/gas/configure
+++ b/gas/configure
@@ -12880,6 +12880,7 @@ fi
 done
 test -n "$YACC" || YACC="yacc"
 
+save_LIBS=$LIBS
 for ac_prog in flex lex
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
@@ -13043,6 +13044,8 @@ esac
 if test "$LEX" = :; then
   LEX=${am_missing_run}flex
 fi
+LIBS=$save_LIBS
+LEXLIB=
 
 ALL_LINGUAS="es fi fr id ja ru rw sv tr uk zh_CN"
 # If we haven't got the data from the intl directory,
diff --git a/gas/configure.ac b/gas/configure.ac
index 78efba88e23..7184b785f79 100644
--- a/gas/configure.ac
+++ b/gas/configure.ac
@@ -930,7 +930,10 @@ AC_DEFINE_UNQUOTED(TARGET_VENDOR,	"${target_vendor}", [Target vendor.])
 AC_DEFINE_UNQUOTED(TARGET_OS,		"${target_os}",    [Target OS.])
 
 AC_PROG_YACC
+save_LIBS=$LIBS
 AM_PROG_LEX
+LIBS=$save_LIBS
+LEXLIB=
 
 ALL_LINGUAS="es fi fr id ja ru rw sv tr uk zh_CN"
 ZW_GNU_GETTEXT_SISTER_DIR
diff --git a/ld/configure b/ld/configure
index c197aaef3cb..8a0b2d6a37d 100755
--- a/ld/configure
+++ b/ld/configure
@@ -16035,6 +16035,7 @@ fi
 done
 test -n "$YACC" || YACC="yacc"
 
+save_LIBS=$LIBS
 for ac_prog in flex lex
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
@@ -16198,6 +16199,8 @@ esac
 if test "$LEX" = :; then
   LEX=${am_missing_run}flex
 fi
+LIBS=$save_LIBS
+LEXLIB=
 
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable maintainer-specific portions of Makefiles" >&5
diff --git a/ld/configure.ac b/ld/configure.ac
index 8ea97c43cd4..ec224facf66 100644
--- a/ld/configure.ac
+++ b/ld/configure.ac
@@ -293,7 +293,10 @@ AM_PO_SUBDIRS
 AC_EXEEXT
 
 AC_PROG_YACC
+save_LIBS=$LIBS
 AM_PROG_LEX
+LIBS=$save_LIBS
+LEXLIB=
 
 AM_MAINTAINER_MODE
 AM_CONDITIONAL(GENINSRC_NEVER, false)
-- 
2.31.1

